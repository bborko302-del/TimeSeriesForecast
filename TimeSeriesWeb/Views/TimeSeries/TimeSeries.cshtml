
@{
    ViewBag.PageHeader = "TimeSeries";
}

<link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />
<link href="~/Content/jquery.jqGrid/ui.jqgrid.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsgrid/dist/jsgrid.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsgrid/dist/jsgrid-theme.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jsgrid/dist/jsgrid.min.js"></script>

<style>
    .add-new-row-button {
        background: #fafafa;
        border: 1px solid #ccc;
        color: #e01b39;
        display: inline-block;
        line-height: normal;
        margin: 3px 0;
        outline: 0;
        padding: 7px 5px;
        text-align: center;
        text-decoration: none;
        width: auto;
        -webkit-border-radius: 0;
        -moz-border-radius: 0;
        border-radius: 0;
    }

        .add-new-row-button:hover,
        .add-new-row-button:focus,
        .add-new-row-button:active {
            border: 1px solid #479761;
            background: #fff;
            color: #479761;
            text-decoration: none;
        }
</style>

<div>
    <h1>Under Construction_1</h1>
    <button class="add-new-row-button">Add New Row</button>
    <!-- Shops Grid -->
    <table id="jsGrid"></table>

</div>

@*<script src="subgrid_grid.js" type="text/javascript"></script>*@

<script>
        $("#jsGrid").jsGrid({
            width: "100%",
            height: "400px",

            inserting: true,
            editing: true,
            sorting: true,
            paging: true,

            data: [
                { ID: 1, EnergyHour: "KW", forecast: "10000" },
            ],

            fields: [
                { name: "ID", type: "number", width: 50, validate: "required" },
                { name: "EnergyHour", type: "text", width: 10 },
                { name: "forecast", type: "text", width: 100 },
                { type: "control" }
            ]
        });
    debugger;
    $.ajax({
        url: 'https://localhost:44350/TimeSeries/GetTimeSeriesData',
        type: "POST",
        //data: $(this).serialize(),
        dataType: "json",
        async: false,
        contentType: 'application/json; charset=utf-8',
        success: function (data) {
            debugger;
            var mydata = data;
            //var message = data.Result;
           


            var updatedData = [
                { ID: 1, EnergyHour: "KW", forecast: "10000" },
                { ID: 2, EnergyHour: "KW", forecast: "15000" }
            ];
            $("#jsGrid").jsGrid("option", "data", updatedData).jsGrid("refresh");


            /*
            for (var i = 0; i <= mydata.length; i++) {
                jQuery("#jsGrid").jqGrid('addRowData', i + 1, mydata[i]);
                // set row height instead css
                //jQuery(context.jqGridContext.selector).jqGrid('setRowData', i + 1, false, { height: 40 });
            }
            */

            //var message = data.Result;
            //$("#Result").html(message);
        },


    });

    /*
    App.Ajax.post({
        url: 'https://localhost:44350/TimeSeries/GetShopsGridData',
        success: function (model) {
            var data = model;
            debugger;


            _this.shopsData = model.Data;
            var mydata = model.Data;
            for (var i = 0; i <= mydata.length; i++) {
                jQuery(context.jqGridContext.selector).jqGrid('addRowData', i + 1, mydata[i]);
                // set row height instead css
                //jQuery(context.jqGridContext.selector).jqGrid('setRowData', i + 1, false, { height: 40 });
            }

        }
    });
    */

</script>
